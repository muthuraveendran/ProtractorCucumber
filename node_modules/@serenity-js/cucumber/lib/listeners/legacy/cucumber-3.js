"use strict";
const CucumberEventProtocolAdapter_1 = require("./CucumberEventProtocolAdapter");
module.exports = function (dependencies) {
    dependencies.cucumber.defineSupportCode(({ BeforeAll, After, AfterAll }) => {
        BeforeAll(function () {
            dependencies.notifier.testRunStarts();
        });
        After(function (event) {
            dependencies.notifier.currentScenarioFinishes(dependencies.resultMapper.outcomeFor(event.result.status, event.result.exception));
            return dependencies.serenity.waitForNextCue();
        });
        AfterAll(function () {
            dependencies.notifier.testRunFinishes();
            return dependencies.serenity.waitForNextCue()
                .then(() => {
                dependencies.notifier.testRunFinished();
            });
        });
    });
    return CucumberEventProtocolAdapter_1.cucumberEventProtocolAdapter(dependencies);
};
//# sourceMappingURL=cucumber-3.js.map