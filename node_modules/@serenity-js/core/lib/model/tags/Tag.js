"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Tag = void 0;
const tiny_types_1 = require("tiny-types");
const TagTypes = require("./index");
/**
 * @access public
 */
class Tag extends tiny_types_1.TinyType {
    constructor(name, type) {
        super();
        this.name = name;
        this.type = type;
        tiny_types_1.ensure('Tag name', name, tiny_types_1.isDefined(), tiny_types_1.property('length', tiny_types_1.isGreaterThan(0)));
        tiny_types_1.ensure('Tag type', type, tiny_types_1.isDefined(), tiny_types_1.property('length', tiny_types_1.isGreaterThan(0)));
    }
    static fromJSON(o) {
        const type = tiny_types_1.ensure('serialised tag type', o.type, tiny_types_1.isDefined(), tiny_types_1.isString());
        const found = Object.keys(TagTypes).find(t => TagTypes[t].Type === type) || TagTypes.ArbitraryTag.name;
        if (Object.prototype.hasOwnProperty.call(TagTypes[found], 'fromJSON')) {
            return TagTypes[found].fromJSON(o);
        }
        return new TagTypes[found](o.name);
    }
    toJSON() {
        return super.toJSON();
    }
}
exports.Tag = Tag;
//# sourceMappingURL=Tag.js.map