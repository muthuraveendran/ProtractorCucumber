{"version":3,"file":"pickle_parser.js","sourceRoot":"","sources":["../../../src/formatter/helpers/pickle_parser.ts"],"names":[],"mappings":";;;;;;AAAA,oDAAsC;AACtC,uEAAyE;AAkBzE,SAAgB,sBAAsB,CAAC,EACrC,MAAM,EACN,kBAAkB,GACa;IAC/B,OAAO,gBAAC,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC;SAC9B,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,kBAAkB,CAAC,EAAE,CAAC,CAAC;SACnC,OAAO,EAAE;SACT,KAAK,EAAE;SACP,KAAK,EAAE,CAAC,WAAW,CAAA;AACxB,CAAC;AATD,wDASC;AAED,SAAgB,cAAc,CAAC,EAC7B,UAAU,EACV,cAAc,GACS;IACvB,OAAO,gBAAC,CAAC,KAAK,CAAC,UAAU,CAAC,UAAU,CAAC;SAClC,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;SAC/B,OAAO,EAAE;SACT,KAAK,EAAE;SACP,KAAK,EAAE,CAAC,OAAO,CAAA;AACpB,CAAC;AATD,wCASC;AAED,SAAgB,gBAAgB,CAC9B,MAAwB;IAExB,OAAO,gBAAC,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC;SACzB,GAAG,CAAC,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC,UAAU,CAAC,EAAE,EAAE,UAAU,CAAC,CAAC;SAChD,SAAS,EAAE;SACX,KAAK,EAAE,CAAA;AACZ,CAAC;AAPD,4CAOC;AAED,SAAgB,iBAAiB,CAAC,EAChC,eAAe,EACf,MAAM,GACoB;IAC1B,MAAM,0BAA0B,GAAG,uDAA6B,CAC9D,eAAe,CAChB,CAAA;IACD,OAAO,0BAA0B,CAAC,gBAAC,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAA;AAC9D,CAAC;AARD,8CAQC","sourcesContent":["import _, { Dictionary } from 'lodash'\nimport { getGherkinScenarioLocationMap } from './gherkin_document_parser'\nimport { messages } from '@cucumber/messages'\n\nexport interface IGetPickleLocationRequest {\n  gherkinDocument: messages.IGherkinDocument\n  pickle: messages.IPickle\n}\n\nexport interface IGetStepKeywordRequest {\n  pickleStep: messages.Pickle.IPickleStep\n  gherkinStepMap: Dictionary<messages.GherkinDocument.Feature.IStep>\n}\n\nexport interface IGetScenarioDescriptionRequest {\n  pickle: messages.IPickle\n  gherkinScenarioMap: Dictionary<messages.GherkinDocument.Feature.IScenario>\n}\n\nexport function getScenarioDescription({\n  pickle,\n  gherkinScenarioMap,\n}: IGetScenarioDescriptionRequest): string {\n  return _.chain(pickle.astNodeIds)\n    .map((id) => gherkinScenarioMap[id])\n    .compact()\n    .first()\n    .value().description\n}\n\nexport function getStepKeyword({\n  pickleStep,\n  gherkinStepMap,\n}: IGetStepKeywordRequest): string {\n  return _.chain(pickleStep.astNodeIds)\n    .map((id) => gherkinStepMap[id])\n    .compact()\n    .first()\n    .value().keyword\n}\n\nexport function getPickleStepMap(\n  pickle: messages.IPickle\n): Dictionary<messages.Pickle.IPickleStep> {\n  return _.chain(pickle.steps)\n    .map((pickleStep) => [pickleStep.id, pickleStep])\n    .fromPairs()\n    .value()\n}\n\nexport function getPickleLocation({\n  gherkinDocument,\n  pickle,\n}: IGetPickleLocationRequest): messages.ILocation {\n  const gherkinScenarioLocationMap = getGherkinScenarioLocationMap(\n    gherkinDocument\n  )\n  return gherkinScenarioLocationMap[_.last(pickle.astNodeIds)]\n}\n"]}